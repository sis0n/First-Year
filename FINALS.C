#include <stdio.h>
#include <string.h>
#include <conio.h>
#include <stdlib.h>
#include <ctype.h>
#define ENTER 13
#define TAB 9
#define BKSPC 8


struct user{
    char phone[50];
    char password[50];
    char name[20];
    float balance;
}usr, usr1;

void signin();
void login();
void menu();

void receipt(char action[], float amount, float balance) {
    textcolor(YELLOW);
    gotoxy(1,5);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\x4 RECEIPT \x4\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    textcolor(GREEN);
    gotoxy(25,7);
    cprintf("Action: %s\n", action);
    gotoxy(25,9);
    cprintf("Amount: PHP %.2f\n", amount);
    gotoxy(25,11);
    cprintf("Current Balance: PHP %.2f\n", balance);
    textcolor(YELLOW);
    gotoxy(1,13);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
}
void receipt2(char action[], float balance) {
    textcolor(YELLOW);
    gotoxy(1,6);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\x4 RECEIPT \x4\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    textcolor(WHITE);
    gotoxy(25,8);
    cprintf("Action: %s\n", action);
    gotoxy(25,10);
    cprintf("Current Balance: PHP %.2f\n", balance);
    textcolor(YELLOW);
    gotoxy(1,12);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
}
void receipt3(char action[], char name[], float amount, float balance) {
    textcolor(CYAN);
    gotoxy(1,6);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\x4 RECEIPT \x4\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    textcolor(WHITE);
    gotoxy(25,8);
    cprintf("Action: %s", action);
    gotoxy(25,10);
    cprintf("To: %s",name);
    gotoxy(25,12);
    cprintf("Amount: PHP %.2f", amount);
    gotoxy(25,14);
    cprintf("Current Balance: PHP %.2f", balance);
    textcolor(CYAN);
    gotoxy(1,15);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
}
void hiddenpass(char *password) {
    int i = 0;
    char ch;

    while (1) {
	ch = getch();

	if (ch == ENTER || ch == TAB) {
	    password[i] = '\0';
	    break;
	} else if (ch == BKSPC) {
	    if (i > 0) {
		i--;
		printf("\b \b");
	    }
	} else {
	    password[i++] = ch;
	    printf("*");
	}
    }
}
void main (){
    char opt;

    while(opt != '1' && opt != '2' && opt != '3'){
    system("cls");
    textcolor(CYAN);
    cprintf("\n\n\n                       \xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");

    textcolor(WHITE);
    gotoxy(24,5);
    cprintf("\xB2          ATM SIMULATOR          \xB2");
    gotoxy(24,6);
    cprintf("\xB2      [1] Register an account    \xB2");
    gotoxy(24,7);
    cprintf("\xB2      [2] Login to an account    \xB2");
    gotoxy(24,8);
    cprintf("\xB2      [3] Log Out                \xB2");
    textcolor(CYAN);
    gotoxy(24,9);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    printf("\n\t\t\t");
    opt = getch();
    opt = toupper(opt);
    switch(opt){
	case '1': system("cls"); signin(); break;
	case '2': system("cls"); login(); break;
	case '3': exit(0);
	default: printf("Invalid"); getch(); system("cls"); continue;
    }
    }
    getch();
}
//global variable
FILE *atm;
char atmsimulator[50];
char pword[50];

void signin(){
    char cont = 'y';
    char pin[50];
    int i;
    int valid = 1;

    printf("\n\t\t\tSIGN IN");
    printf("\n\n\t\t\tEnter your name (only characters allowed): ");
    scanf("%s",usr.name);
    for(i = 0; usr.name[i] != '\0'; i++){
	if(!isalpha(usr.name[i]))	{
	   valid = 0;
	   break;
	}
    }
    if(valid){
	printf("\t\t\tEnter your Pin Number: ");
	scanf("%s",usr.phone);
	printf("\t\t\tEnter your Password: ");
    hiddenpass(usr.password);
    strcpy(atmsimulator,usr.phone);
    atm = fopen(strcat(atmsimulator,".acc"),"r");
    if(atm == NULL){
	fclose(atm);
	usr.balance = 0;
	strcpy(atmsimulator,usr.phone);
	atm = fopen(strcat(atmsimulator,".acc"),"w");
	fwrite(&usr,sizeof(struct user),1,atm);
	if(fwrite != 0){
	fclose(atm);
	    printf("\n\t\t\tAccount Registered!");
	printf("\n\n\t\t\tYou want to LOG IN your account? [y/n] ");
	    scanf("%s",&cont);
	    if(cont == 'y'){
	   system("cls");
	   login();
	    }
	    else {
	    printf("\n\n\t\t\tThank you for using our ATM SIMULATOR!");
	    }
	}
	else{
	    printf("\n\n\t\t\tError bruh! Please try again!");
	}
    }
    else{
	printf("\n\n\t\t\tAccount Number Already Exist!");
	printf("\n\n\t\t\tYou want to go back? [y/n] ");
	scanf("%s",&cont);
	if(cont == 'y'){
	    system("cls");
	    main();
	}
	else{
	    printf("\n\t\t\tPress anything to exit");
	}
    }
	}
	else{
	printf("\n\t\t\tInvalid Name\n\n\t\t\tOnly letters are allowed!\n");
	printf("\n\t\t\tYou want to go back? [y/n] ");
	scanf("%s",&cont);
	if(cont == 'y'){
	    system("cls");
	    main();
	}
	else{
	    printf("\n\t\t\tPress anything to exit");
	}
	}
}
void login(){
    char phone[50];
    char pword[50];
    char cont = 'y';

    printf("\n\t\t\tLOG IN");
    printf("\n\n\t\t\tPin Number: ");
	scanf("%s",phone);
	printf("\t\t\tPassword: ");
	hiddenpass(pword);
	strcpy(atmsimulator,phone);
	atm = fopen(strcat(atmsimulator,".acc"),"r");
	if(atm == NULL){
	printf("\n\n\t\t\tRestart the System");
	atm = fopen(strcat(atmsimulator,".acc"),"w");
	}
	else{
	if(atm != NULL){
	fread(&usr,sizeof(struct user),1,atm);
	fclose(atm);
	if(!strcmp(pword,usr.password)){
	    system("cls");
	    menu();
	}
	else{
	    printf("\n\t\t\tInvalid Password!");
	    printf("\n\n\t\t\tYou want to try again? [y/n] ");
	    scanf("%s",&cont);
	    if(cont == 'y'){
	    system("cls");
	    login();
	}
	else {
	    printf("\n\t\t\tThank you for using our ATM SIMULATOR");
	    }
	}
	}
	else{
	    printf("\n\t\t\tAccount is not registered");
	printf("\n\t\t\tYou want to try again? [y/n] ");
	    scanf("%s",&cont);
	    if(cont == 'y'){
	    main();
	}
	else {
	    printf("Thank you for using our ATM SIMULATOR");
	    }
    }
	}
}
void menu(){
    char phone[50];
    char pword[50];
    char pin[50];
    char cont = 'y';
    char tinue = 'y';
    int opt, choice;
    float amount;

    textcolor(YELLOW);
    gotoxy(1,1);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    gotoxy(1,2);
    textcolor(WHITE);
    cprintf("\xB2                               Welcome %s                                 \xB2",usr.name);
    textcolor(YELLOW);
    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
    while(cont == 'y'){
    textcolor(WHITE);
		gotoxy(30,5);
		cprintf("[1] Check balance");
		gotoxy(30,6);
		cprintf("[2] Depositing cash");
		gotoxy(30,7);
		cprintf("[3] Cash Withdrawal");
		gotoxy(30,8);
		cprintf("[4] Transfer");
		gotoxy(30,9);
		cprintf("[5] Change the password");
		gotoxy(30,10);
		cprintf("[6] Log Out");
		gotoxy(30,11);
		cprintf("Your Choice: ");
		scanf("%i",&choice);

		switch(choice){
		case 1:
		system("cls");
		textcolor(GREEN);
		cprintf("\n\n\n\n\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		gotoxy(25,6);
		textcolor(RED);
		cprintf("Your balance is PHP %.2f", usr.balance);
		gotoxy(1,7);
		textcolor(GREEN);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		gotoxy(18,8);
		textcolor(RED);
		cprintf("B2 Do you want to print the receipt? [y/n] ");
		scanf("%s",&tinue);
		textcolor(GREEN);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		if(tinue == 'y'){
		    system("cls");
		    receipt2("Check balance", usr.balance);
		}
		else{
		    textcolor(RED);
		    gotoxy(20,10);
		    cprintf("Thank you for using our ATM SIMULATOR!\n");
		    textcolor(GREEN);
		    gotoxy(1,11);
		    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		}
		    break;
		case 2:
		system("cls");
		textcolor(RED);
		gotoxy(1,6);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		textcolor(BLUE);
		gotoxy(25,8);
		cprintf("Enter the amount: PHP ");
		scanf("%f",&amount);
		textcolor(RED);
		gotoxy(1,10);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		usr.balance = usr.balance + amount;
		atm = fopen(atmsimulator,"w");
		fwrite(&usr,sizeof(struct user),1,atm);
		if(fwrite != NULL)
		    textcolor(BLUE);
		    gotoxy(25,11);
		    cprintf("Successfully Deposited!\n");
		    textcolor(RED);
		    gotoxy(1,12);
		    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		    textcolor(BLUE);
		    gotoxy(25,14);
		    cprintf("Do you want to print the receipt? [y/n] ");
		    scanf("%s",&tinue);
		    if(tinue == 'y'){
			system("cls");
			receipt("Deposit", amount, usr.balance);
		    }
		    else{
			textcolor(RED);
			gotoxy(1,16);
			cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			textcolor(BLUE);
			gotoxy(25,17);
			cprintf("Thank you for using our ATM SIMULATOR!\n");
			textcolor(RED);
			gotoxy(1,18);
			cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		    }
		     break;
		case 3:
		system("cls");
		textcolor(19);
		gotoxy(1,6);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		textcolor(WHITE);
		gotoxy(25,8);
		cprintf("Enter the amount: PHP ");
		scanf("%f",&amount);
		if(amount <= 10000){
		    if(amount >= 100){
			textcolor(19);
			gotoxy(1,10);
			cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			if(amount > usr.balance){
			    textcolor(WHITE);
			    gotoxy(25,11);
			    cprintf("Insufficient balance");
			    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			}
			else{
			    usr.balance -= amount;
			    atm = fopen(atmsimulator,"w");
			    fwrite(&usr,sizeof(struct user),1,atm);
			    if(fwrite != NULL)
				textcolor(WHITE);
				gotoxy(25,12);
				cprintf("Successfully Withdrawn PHP %.2f",amount);
				textcolor(19);
				gotoxy(1,14);
				cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
				textcolor(WHITE);
				gotoxy(25,16);
				cprintf("Do you want to print the receipt? [y/n] ");
				scanf("%s",&tinue);
				textcolor(19);
				gotoxy(1,18);
				cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
				if(tinue == 'y'){
				    system("cls");
				    receipt("Withdrawal", amount, usr.balance);
				}
				else{
				    textcolor(WHITE);
				    gotoxy(25,19);
				    cprintf("Thank you for using our ATM SIMULATOR!\n\n");
				    textcolor(19);
				    gotoxy(1,20);
				    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
				}
		    fclose(atm);
			}
		    }
		    else{
			textcolor(WHITE);
			gotoxy(25,10);
			cprintf("Invalid");
			gotoxy(25,12);
			cprintf("Can only Withdraw PHP 100 up\n\n");
			textcolor(19);
			gotoxy(1,13);
			cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		    }
	    }
	    else{
		textcolor(WHITE);
		gotoxy(25,10);
		cprintf("Can only Withdraw PHP10000 per transaction.");
		gotoxy(25,12);
		cprintf("Please Log In again!");
		gotoxy(25,14);
		cprintf("You want to Log In again? [y/n] ");
		scanf("%s", &tinue);
		if(tinue == 'y'){
		    main();
		}
		else{
		    textcolor(WHITE);
		    gotoxy(25,16);
		    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		    textcolor(19);
		    gotoxy(1,17);
		    cprintf("THANK YOU FOR USING ATM SIMULATOR");
		    return;
		}
	    }
		    break;
		case 4:
		system("cls");
		textcolor(CYAN);
		gotoxy(1,5);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		textcolor(WHITE);
		gotoxy(25,7);
		cprintf("Enter the Pin Number: ");
		scanf("%s",phone);
		gotoxy(25,8);
		cprintf("Enter the amount: PHP ");
		scanf("%f",&amount);
		strcpy(atmsimulator,phone);
		atm = fopen(strcat(atmsimulator,".acc"),"r");
		if(atm != NULL){
		textcolor(CYAN);
		gotoxy(1,9);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		textcolor(WHITE);
		gotoxy(25,10);
		cprintf("Do you want to continue? [y/n] ");
		scanf("%s",&tinue);
		if(tinue == 'y'){
		system("cls");
		textcolor(WHITE);
		gotoxy(25,5);
		cprintf("Enter your Account Number: ");
		scanf("%s",pin);
		gotoxy(25,6);
		cprintf("Enter your Password: ");
		hiddenpass(pword);
		strcpy(atmsimulator,pin);
	atm = fopen(strcat(atmsimulator,".acc"),"r");
	if(atm != NULL){
	    fread(&usr,sizeof(struct user),1,atm);
	    fclose(atm);
	    if(!strcmp(pword,usr.password)){
		strcpy(atmsimulator,phone);
		atm = fopen(strcat(atmsimulator,".acc"),"r");
		if(atm == NULL){
		    textcolor(WHITE);
		    gotoxy(25,8);
		    cprintf("Account number is no where to be found");
		    atm = fopen(strcat(atmsimulator,".acc"),"w");
		}
		else{
		    fread(&usr1,sizeof(struct user),1,atm);
		    fclose(atm);
		    if(amount > usr.balance){
			textcolor(WHITE);
			gotoxy(25,10);
			cprintf("Insufficient balance");
		    }
		    else{
			atm = fopen(atmsimulator,"w");
			usr1.balance += amount;
			fwrite(&usr1,sizeof(struct user),1,atm);
			fclose(atm);
			if(fwrite !=  NULL){
			    textcolor(CYAN);
			    gotoxy(1,7);
			    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			    textcolor(WHITE);
			    gotoxy(25,9);
			    cprintf("Successfully transfered Php%.2f to %s\n",amount,usr1.name);
			    textcolor(CYAN);
			    gotoxy(1,11);
			    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			  //  fclose(atm);
			    strcpy(atmsimulator,usr.phone);
			    atm = fopen(strcat(atmsimulator,".acc"),"w");
			    usr.balance -= amount;
			    fwrite(&usr,sizeof(struct user),1,atm);
			    fclose(atm);
			    textcolor(WHITE);
			    gotoxy(25,12);
			    cprintf("Do you want to print the receipt? [y/n] ");
			    scanf("%s",&tinue);
			    if(tinue == 'y'){
				system("cls");
				receipt3("Transfered",usr1.name, amount, usr.balance);
			    }
			    else{
				textcolor(CYAN);
				gotoxy(1,13);
				cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
				textcolor(WHITE);
				gotoxy(25,14);
				cprintf("Thank you for using our ATM SIMULATOR!");
				textcolor(WHITE);
				gotoxy(25,15);
				cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
			    }
			}
		    }
		}
	}
	else{
	    textcolor(WHITE);
	    gotoxy(25,8);
	    cprintf("Wrong Password! Please try again");
	}
	}
	else{
	    textcolor(WHITE);
	    gotoxy(25,8);
	    cprintf("Invalid Pin Number! Please try again");

		}
		}
		else{
		  textcolor(WHITE);
		  gotoxy(25,12);
		  cprintf("Thank you for using ATM Simulator");
		}
		}
		else{
		  textcolor(WHITE);
		  gotoxy(25,10);
		  cprintf("Invalid Account Number!");
		}
		    break;
		case 5:
		system("cls");
		textcolor(GREEN);
		gotoxy(1,5);
		cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
		textcolor(DARKGRAY);
		gotoxy(25,7);
		cprintf("Enter the new password: ");
		scanf("%s",pword);
		atm = fopen(atmsimulator,"w");
		strcpy(usr.password,pword);
		fwrite(&usr,sizeof(struct user),1,atm);
		if(fwrite != NULL)
		    textcolor(DARKGRAY);
		    gotoxy(25,9);
		    cprintf("Your password is successfully changed");
		    break;
		case 6: main(); break;
		default:
		    textcolor(WHITE);
		    gotoxy(30,13);
		    cprintf("Invalid Option!");
		    gotoxy(1,14);
		    cprintf("\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2\xB2");
	    }
	    printf("\t\t\tDo you want to continue? [y/n] ");
		scanf("%s",&cont);
		system("cls");
}
main();
}
